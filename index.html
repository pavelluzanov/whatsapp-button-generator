<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WhatsApp Button Generator</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: row;
      margin: 0;
    }
    .form-section {
      width: 50%;
      padding: 2rem;
      background: #f9f9f9;
      height: 100vh;
      overflow-y: auto;
    }
    .preview-section {
      width: 50%;
      position: sticky;
      top: 0;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      border-left: 2px solid #eee;
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }
    input, select, textarea {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.25rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      margin-top: 1.5rem;
      padding: 0.75rem 1.5rem;
      background: #25D366;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }
    textarea#output {
      margin-top: 1rem;
      font-family: monospace;
    }
    .footer {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #888;
    }
    .copy-button {
      margin-top: 1rem;
      background: #333;
      color: white;
    }
  </style>
</head>
<body>
  <div class="form-section">
    <h1>WhatsApp Button Generator</h1>

    <form id="waForm" onsubmit="generateButtonCode(); return false;">
      <label>Button Text</label>
      <input type="text" id="buttonName" value="Chat with Pavel (not-AI)" />

      <label>Brand Name</label>
      <input type="text" id="brandName" value="Pavel (not-AI)" />

      <label>Brand Subtitle</label>
      <input type="text" id="brandSubtitleText" value="Replies within a few days" />

      <label>Brand Image URL</label>
      <input type="text" id="brandImageUrl" value="https://media.licdn.com/..." />

      <label>Button Icon Size (px)</label>
      <input type="number" id="buttonIconSize" value="24" />

      <label>Button Size</label>
      <select id="buttonSize">
        <option value="small">Small</option>
        <option value="medium" selected>Medium</option>
        <option value="large">Large</option>
      </select>

      <label>Button Position</label>
      <select id="buttonPosition">
        <option value="left">Left</option>
        <option value="right" selected>Right</option>
      </select>

      <label>Call to Action Text</label>
      <input type="text" id="callToAction" value="Start Chat" />

      <label>WhatsApp Phone Number</label>
      <input type="text" id="phoneNumber" value="601126918969" />

      <label>Welcome Message</label>
      <input type="text" id="welcomeMessage" value="Hello there üëã" />

      <label>Prefill Message</label>
      <textarea id="prefillMessage">Hi, I want to chat with you.</textarea>

      <button type="submit">Generate Button Code</button>

      <label>Generated Code</label>
      <textarea id="output" rows="8"></textarea>
      <button class="copy-button" onclick="copyCode()">Copy Code</button>

      <div class="footer">‚ù§Ô∏è Made with love by Pavel</div>
    </form>
  </div>

  <div class="preview-section">
    <div id="livePreview">
      <!-- live widget preview inserted here -->
    </div>
  </div>

  <script>
    function generateButtonCode() {
      const config = {
        buttonName: document.getElementById('buttonName').value,
        brandName: document.getElementById('brandName').value,
        brandSubtitleText: document.getElementById('brandSubtitleText').value,
        brandImageUrl: document.getElementById('brandImageUrl').value,
        buttonIconSize: parseInt(document.getElementById('buttonIconSize').value),
        buttonSize: document.getElementById('buttonSize').value,
        buttonPosition: document.getElementById('buttonPosition').value,
        callToAction: document.getElementById('callToAction').value,
        phoneNumber: document.getElementById('phoneNumber').value,
        welcomeMessage: document.getElementById('welcomeMessage').value,
        prefillMessage: document.getElementById('prefillMessage').value,
        baseUrl: 'https://cdn.jsdelivr.net/gh/trysetter/button-generator-0001@main'
      };

      const script = `<!-- WA Button START/ -->\n<script>\nwindow._whatsappConfig = ${JSON.stringify(config, null, 2)};\n</script>\n<script src="https://cdn.jsdelivr.net/gh/trysetter/button-generator-0001@main/embed.js" async></script>\n<!-- WA Button END/ -->`;

      document.getElementById("output").value = script;
      updatePreview(config);
    }

    function copyCode() {
      const output = document.getElementById("output");
      output.select();
      document.execCommand("copy");
    }

    function updatePreview(config) {
      const preview = document.getElementById("livePreview");
      preview.innerHTML = `
        <div style="border:1px solid #ccc;padding:1rem;border-radius:12px;width:300px;font-family:sans-serif;">
          <div style="background:#075E54;color:white;padding:0.75rem;border-top-left-radius:12px;border-top-right-radius:12px;">
            <img src="${config.brandImageUrl}" alt="Brand" style="width:32px;height:32px;border-radius:50%;vertical-align:middle;margin-right:0.5rem;">
            <strong>${config.brandName}</strong><br/>
            <small>${config.brandSubtitleText}</small>
          </div>
          <div style="background:#e0dcd7;padding:1rem;">
            <div style="margin-bottom:0.5rem;"><strong>${config.brandName}</strong><br/>${config.welcomeMessage}</div>
            <div style="background:#d4f8cb;padding:0.5rem;border-radius:6px;">${config.prefillMessage}</div>
          </div>
          <div style="padding:1rem;background:white;text-align:center;border-bottom-left-radius:12px;border-bottom-right-radius:12px;">
            <button style="background:#25D366;color:white;border:none;padding:0.75rem 1rem;border-radius:24px;font-size:16px;display:flex;align-items:center;justify-content:center;gap:0.5rem;">
              <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" width="${config.buttonIconSize}" height="${config.buttonIconSize}" />
              ${config.callToAction}
            </button>
            <div style="margin-top:0.5rem;font-size:0.8rem;color:#999;">‚ö° Powered by Setter AI</div>
          </div>
        </div>
      `;
    }
  </script>
</body>
</html>
